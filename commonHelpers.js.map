{"version":3,"file":"commonHelpers.js","sources":["../src/js/unsplash-api.js","../src/js/refs.js","../src/js/createMarkup.js","../src/js/spinner.js","../src/js/gallery.js"],"sourcesContent":["import axios from 'axios';\n\n// export function getPhotos(query, page) {\n//   const BASE_URL = 'https://api.unsplash.com';\n//   const END_POINT = '/search/photos';\n//   const API_KEY = 'LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc';\n\n//   const params = new URLSearchParams({\n//     query,\n//     page,\n//     per_page: 20,\n//     orientation: 'portrait',\n//     client_id: API_KEY,\n//   });\n\n//   return fetch(`${BASE_URL}${END_POINT}/?${params}`).then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.status);\n//     }\n//     return response.json();\n//   });\n// }\naxios.defaults.baseURL = 'https://api.unsplash.com';\n// axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;\n\nexport async function getPhotos(query, page) {\n  const API_KEY = 'LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc';\n  const response = await axios.get('/search/photos', {\n    params: {\n      query,\n    page,\n    per_page: 20,\n    orientation: 'portrait',\n    client_id: API_KEY,\n    }\n  })\n  return response.data;\n}\n ","// const form = document.querySelector('.js-search-form');\n// const galleryList = document.querySelector('.js-gallery');\n\nexport const refs = {\n  form: document.querySelector('.js-search-form'),\n  galleryList: document.querySelector('.js-gallery'),\n  target: document.querySelector('.js-backdrop'),\n  loadBtn: document.querySelector('.js-load-more'),\n};\n","export function createMarkup(arr) {\n  return arr\n    .map(item => {\n      return `<li><img src=\"${item.urls.small}\" alt=\"${item.alt_description}\"></li>`;\n    })\n    .join('');\n}\n","import { Spinner } from 'spin.js';\nimport { refs } from './refs';\n\nconst opts = {\n  lines: 16, // The number of lines to draw\n  length: 41, // The length of each line\n  width: 19, // The line thickness\n  radius: 29, // The radius of the inner circle\n  scale: 0.85, // Scales overall size of the spinner\n  corners: 1, // Corner roundness (0..1)\n  speed: 1, // Rounds per second\n  rotate: 15, // The rotation offset\n  animation: 'spinner-line-fade-more', // The CSS animation name for the lines\n  direction: 1, // 1: clockwise, -1: counterclockwise\n  color: '#3c45c3', // CSS color or array of colors\n  fadeColor: 'transparent', // CSS color or array of colors\n  top: '52%', // Top position relative to parent\n  left: '50%', // Left position relative to parent\n  shadow: '0 0 1px transparent', // Box-shadow for the lines\n  zIndex: 2000000000, // The z-index (defaults to 2e9)\n  className: 'spinner', // The CSS class to assign to the spinner\n  position: 'absolute', // Element positioning\n};\nconst spinner = new Spinner(opts);\n\n\n\nexport function showSpinner() {\n    spinner.spin(refs.target);\n    refs.target.classList.remove('is-hidden');\n}\n\nexport function stopSpinner() {\n    spinner.stop();\n    refs.target.classList.add('is-hidden');\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nimport { getPhotos } from './unsplash-api';\nimport { refs } from './refs';\nimport { createMarkup } from './createMarkup';\nimport { showSpinner, stopSpinner } from './spinner';\n\nrefs.form.addEventListener('submit', onSubmit);\nrefs.loadBtn.addEventListener('click', onBtnClick);\nlet page = 1;\nlet searchQuery = null;\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  refs.galleryList.innerHTML = '';\n  showSpinner();\n  searchQuery =\n    event.currentTarget.elements['user-search-query'].value.trim();\n  try {\n      const response = await getPhotos(searchQuery, page)\n    \n      if (response.results.length === 0) {\n        return iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      }\n      refs.galleryList.innerHTML = createMarkup(response.results);\n      if (response.total > 20) {\n        refs.loadBtn.classList.remove('is-hidden');\n      }\n  \n    } catch (error) {\n        console.log(error.message);\n    } finally {\n      stopSpinner();\n      event.target.reset();\n  }\n}\n\nasync function onBtnClick() {\n  showSpinner();\n  page += 1;\n  try {\n    const response = await getPhotos(searchQuery, page)\n    \n      refs.galleryList.insertAdjacentHTML('beforeend', createMarkup(response.results));\n      // Функція для скролу\n      const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n\n      window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n      });\n      const lastPage = Math.ceil(response.total / 20);\n      if (lastPage === page) {\n        refs.loadBtn.classList.add('is-hidden');\n        return iziToast.info({\n          message:\n            \"We're sorry, but you've reached the end of search results\",\n        });\n      }\n    \n  } catch (error) {\n    console.log(error.message);\n  } finally {\n  stopSpinner();\n  }\n\n}"],"names":["axios","getPhotos","query","page","API_KEY","refs","createMarkup","arr","item","opts","spinner","Spinner","showSpinner","stopSpinner","onSubmit","onBtnClick","searchQuery","event","response","iziToast","error","cardHeight"],"mappings":"owBAsBAA,EAAM,SAAS,QAAU,2BAGlB,eAAeC,EAAUC,EAAOC,EAAM,CAC3C,MAAMC,EAAU,8CAUhB,OATiB,MAAMJ,EAAM,IAAI,iBAAkB,CACjD,OAAQ,CACN,MAAAE,EACF,KAAAC,EACA,SAAU,GACV,YAAa,WACb,UAAWC,CACV,CACL,CAAG,GACe,IAClB,CClCO,MAAMC,EAAO,CAClB,KAAM,SAAS,cAAc,iBAAiB,EAC9C,YAAa,SAAS,cAAc,aAAa,EACjD,OAAQ,SAAS,cAAc,cAAc,EAC7C,QAAS,SAAS,cAAc,eAAe,CACjD,ECRO,SAASC,EAAaC,EAAK,CAChC,OAAOA,EACJ,IAAIC,GACI,iBAAiBA,EAAK,KAAK,KAAK,UAAUA,EAAK,eAAe,SACtE,EACA,KAAK,EAAE,CACZ,CCHA,MAAMC,EAAO,CACX,MAAO,GACP,OAAQ,GACR,MAAO,GACP,OAAQ,GACR,MAAO,IACP,QAAS,EACT,MAAO,EACP,OAAQ,GACR,UAAW,yBACX,UAAW,EACX,MAAO,UACP,UAAW,cACX,IAAK,MACL,KAAM,MACN,OAAQ,sBACR,OAAQ,IACR,UAAW,UACX,SAAU,UACZ,EACMC,EAAU,IAAIC,EAAQF,CAAI,EAIzB,SAASG,GAAc,CAC1BF,EAAQ,KAAKL,EAAK,MAAM,EACxBA,EAAK,OAAO,UAAU,OAAO,WAAW,CAC5C,CAEO,SAASQ,GAAc,CAC1BH,EAAQ,KAAI,EACZL,EAAK,OAAO,UAAU,IAAI,WAAW,CACzC,CC1BAA,EAAK,KAAK,iBAAiB,SAAUS,CAAQ,EAC7CT,EAAK,QAAQ,iBAAiB,QAASU,CAAU,EACjD,IAAIZ,EAAO,EACPa,EAAc,KAElB,eAAeF,EAASG,EAAO,CAC7BA,EAAM,eAAc,EACpBZ,EAAK,YAAY,UAAY,GAC7BO,IACAI,EACEC,EAAM,cAAc,SAAS,mBAAmB,EAAE,MAAM,OAC1D,GAAI,CACA,MAAMC,EAAW,MAAMjB,EAAUe,EAAab,CAAI,EAElD,GAAIe,EAAS,QAAQ,SAAW,EAC9B,OAAOC,EAAS,MAAM,CACpB,QACE,0EACZ,CAAS,EAEHd,EAAK,YAAY,UAAYC,EAAaY,EAAS,OAAO,EACtDA,EAAS,MAAQ,IACnBb,EAAK,QAAQ,UAAU,OAAO,WAAW,CAG5C,OAAQe,EAAO,CACZ,QAAQ,IAAIA,EAAM,OAAO,CACjC,QAAc,CACRP,IACAI,EAAM,OAAO,OAChB,CACH,CAEA,eAAeF,GAAa,CAC1BH,IACAT,GAAQ,EACR,GAAI,CACF,MAAMe,EAAW,MAAMjB,EAAUe,EAAab,CAAI,EAEhDE,EAAK,YAAY,mBAAmB,YAAaC,EAAaY,EAAS,OAAO,CAAC,EAE/E,KAAM,CAAE,OAAQG,CAAU,EAAK,SAC9B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAOxC,GALA,OAAO,SAAS,CAChB,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAO,EACgB,KAAK,KAAKH,EAAS,MAAQ,EAAE,IAC7Bf,EACf,OAAAE,EAAK,QAAQ,UAAU,IAAI,WAAW,EAC/Bc,EAAS,KAAK,CACnB,QACE,2DACZ,CAAS,CAGN,OAAQC,EAAO,CACd,QAAQ,IAAIA,EAAM,OAAO,CAC7B,QAAY,CACVP,GACC,CAEH"}